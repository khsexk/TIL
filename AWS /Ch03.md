# Ch03. 무한대로 저장 가능한 스토리지 만들기

## 1. 스토리지(Storage)
**→ 스토리지를 서버에 직접 연결할 수 있고, 대용량의 데이터를 저장하기 위해 별도의 스토리지용 네트워크를 구성할 수도 있음**  

#### **연결방식**
- 서버에 직접 연결하는 방식
    - DAS(; Direct Attached Storage)
- 스토리지를 빠른 속도의 네트워크로 연결하는 방식
    - NAS(;Network Attached Storage)
    - SAN(; Storage Area Network)
```
❗️ NAS 방식과 SAN 방식
☛ NAS
- LAN을 연결하여 사용 (비용 저렴)
- 파일 단위로 데이터 접속
- OS 입장에서 파일 서버로 표시

☛ SAN
- 확장 용이
- 대규모 엔터프라이즈 환경을 구성하기 적합한 고속듸 전용 네트워크 구성 (빠른 서비스)
- 블록 수준에서 데이터 저장
- OS 입장에서 일반적으로 디스크로 나타나며, 별도로 구성된 스토리지용 네트워크 존재
```

**⭐️ AWS에서는 데이터를 무한 저장 가능한 S3와 대용량 데이터를 백업 및 보관 가능한 Glacier 등 용도에 따라 다양한 종류의 스토리지를 이용할 수 있다!**

## 2. 데이터 백업(Data Backup)
#### **문제가 발생할 수 있는 경우**
- HW 고장 및 하드디스크 손상
- DB 및 SW 손상
- OS 자체 문제로 인한 데이터 손상
- 운영상의 데이터 유실 및 작업자의 실수, 개발자의 실수 및 쿼리 오류
- etc  

**⭐️ AWS는 EBS 스냅샷 및 AMI 백업 등의 기능을 활용하여 데이터 백업 서비스 제공**  

## 3. 스냅샵(Snapshot)
def) 특정 시간에 데이터 저장 장치의 상태를 별도의 파일이나 이미지로 저장하는 기술  

- 데이터 분석, 보호, 복제와 같은 작업을 위해 수행
- 재해복구와 같은 장애 상황에서 최상의 데이터 보호 수단
- 보다 높은 Application 가용성을 제공
- 대용량 데이터의 백업 관리 단순화

**⭐️ AWS는 EBS에 대한 스냅샷을 제공**
- 손쉬운 서버의 데이터 백업/복원
- 다른 EC2나 리전으로 EBS 복사 기능을 통해 인스턴스 migration 지원

## 4. S3와 Glacier
### **i) Amazon S3**
- ; Simple Storage Services
- 무한대로 저장 가능하고 사용한 만큼만 지분하는 인터넷 기반 스토리지 서비스
- **Bucket**을 생성하고 데이터를 **key-value** 형식의 객체로 저장
- 스토리지 기술을 중심으로 파일 단위의 접근만 지원

#### 활동분야
- 백업 및 복구
- 데이터 아카이빙
- 빅데이터 분석을 위한 데이터 레이크
- 하이브리드 클라우드 스토리지
- 재해복구

#### 옵션
- S3 Standard
    - 자주 액세스하는 데이터용으로, 내구성, 가용성 및 성능이 뛰어남
    - 99.99% 가용성 + 99.99999999% 내구성 제공 설계 지원
- S3 Standard-IA
    - 액세스 빈도가 낮으며, 빠른 엑세스가 필요한 데이터용
    - 내구성 및 성능 99.99%
    - 최소 3개의 AZ에 저장
- S3 One Zone-IA
    - 액세스 빈도가 낮으며, 빠른 액세스가 필요한 데이터용
    - 단일 AZ에 데이터 저장
- Amazon Glacier
    - 데이터 보관을 위한 안전하고 안정적이며 비용이 매우 저렴한 스토리지
    - 데이터 아카이빙 및 장기간 데이터 보관 및 오래된 로그 데이터에 대한 저장 용도로 적당

### **ii) Amazon Glacier**
- 데이터 아카이빙 및 장기 백업을 위한 안전하고 안정적이며 비용이 매우 저렴한 클라우드 스토리지 서비스
- Bucket과 유사한 **Vault**라는 개별 스토리지 영역 생성 및 데이터 보관
- 라이프 사이클 옵션을 활용하여 일정 기간 이상 지난 데이터을 Glacier 이동 및 저장

#### 데이터 접근 방법
- API/SDK를 이용한 Direct 연결
- S3 라이프 사이클과의 통합 (자동 이관)
- 3rd Party Tool과 AWS Storage Gateway 연동  &nbsp;     ex) NetBackup, Veeam

## 5. AMI와 Market Place
### **i) AMI(Amazon Machine Image)**
: EC2 인스턴스 생성에 필요한 모든 SW 정보를 담고 있는 템플릿 이미지  
- AMI 이미지를 선택하면 OS와 Application이 인스턴스 생성 시 그대로 설치
- Auto Scaling 등 자동화 할 때, 인스턴스를 다른 리전으로 이전해야 할 경우, AMI Marketplace를 이용하기 위해 AMI 사용

### **ii) Amazon Maketplace**
: AWS에서 실행되는 SW를 판매 또는 구매할 수 있는 온라인 스토어  
→ 다양한 분야에 걸친 솔루션들과 Application 검색, 구매, 배포 및 관리할 수 있는 One-Stop 쇼핑 지원  
(OS, Security, Network, Storage, BI, DB, Media 등)

```shell
# 🙇🏻 PC 파일을 Amazon S3로 백업하기

#   i) S3에서 폴더 만들기
#  ii) IAM → 사용자 추가 → AdministratorAccess 정책 추가
# iii) Access Key와 Secret Access Key로 AWS cli 인증
    $ aws configure
#  iv) 백업
    $ aws s3 sync {백업할 로컬 파일 경로} {s3://버킷명/폴더 경로}
```

## +) 클라우드 스토리지 유형
**[출처: Amazon](https://aws.amazon.com/ko/what-is-cloud-object-storage/)**  

### **i) 객체 스토리지**
- 클라우드에서 개발된 애플리케이션은 객체 스토리지의 방대한 확장성 및 메타데이터 특성을 활용하는 경우가 많음
- 규모와 유연성이 필요한 최신 애플리케이션을 처음부터 구축하는 데 적합
- 분석, 백업 또는 아카이브를 위해 기존 데이터 스토어를 가져오는 데 이를 사용할 수도 있음
- 솔루션 예) **Amazon S3**

### **ii) 파일 스토리지**
- 대부분 애플리케이션은 공유 파일에 액세스해야 하며, 파일 시스템이 있어야 함
- 이러한 유형의 스토리지는 NAS 서버에서 주로 지원
- 대규모 콘텐츠 리포지토리, 개발 환경, 미디어 스토어 또는 사용자 홈 디렉터리 등과 같은 사용 사례에 적합
- 솔루션 예) **Amazon Elastic File System(EFS)**

### **iii) 블록 스토리지**
- DB 또는 ERP 시스템과 같은 기타 엔터프라이즈 애플리케이션은 호스트별로 지연 시간이 짧은 전용 스토리지가 필요한 경우가 많음 
- DAS 또는 SAN와 유사
- 개별 가상 서버로 프로비저닝되기 때문에 고성능 워크로드에 필요한 엄청나게 낮은 지연 시간을 제공
- 솔루션 예) **Amazon Elastic Block Store(EBS)**