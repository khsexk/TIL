# Ch02. 확장성과 안정성 높은 서버 만들기

## 1. 서버와 스토리지
**서버**: 특화된 어떤 임무를 수행하기 위해 설계된 컴퓨터  
- 고성능의 CPU, 빠르고 고용량 메모리, 대용량 디스크 요구
- 서버용 OS 설치 및 용도에 맞는 특화된 임무를 수행하기 위한 SW 설치
- AWS에서는 EC2(; Elastic Compute Cloud)를 이용해 가상의 서버 구성 및 필요 SW 설치

**하드디스크**: 디스크들을 겹으로 쌓아 데이터를 저장, 검색, 삭제하며 영구적으로 저장하기 위한 컴퓨터의 주기억장치
- 서버는 고성능으로 대량의 데이터를 빠르게 처리
    - 디스크 어레이 컨트롤러와 RAID와 같은 기술 활용
    - AWS는 EBS(; Elastic Block Storage) 서비스를 이용하여 EC2에 디스크를 추가하여 서비스 이용

## 2. 보안과 방화벽
**✎ 서버 및 스토리지 등 IT 인프라에 저장된 중요한 정보를 보호하고 지키는 일은 무엇보다 중요함**  
### **보안을 위해 AWS에서 제공하는 다양한 서비스**
- AWS IAM: 리소스에 대한 사용자 액세스 및 암호화 키 관리 서비스
- Amazon GuardDuty: 관리형 위험탐지 서비스
- AWS Shield: DDoS 보호를 위한 서비스
- AWS WAF: 악성 웹 트래픽 필터링 서비스  

**방화벽**: 외부 네트워크와 연결돼 있는 내부 네트워크의 중요한 정보 자산에 대해 외부로부터 불법적인 침입을 보호하기 위한 시스템  
- 외부의 공격 및 침입을 탐지하고 방어할 수 있는 시간을 벌어줌
- AWS의 자체 방화벽 서비스
    - Security Group, NACL, AWS WAF  

## 3. 클라우드 용어
**✎ AWS는 전세계를 대상으로 클라우드 서비스를 제공하기 위해 전세계 주요 지역에 IDC를 자체 구축 및 운영하고 있음**  

**Region**: amazon은 전세계 주요 국가에 리전 구축
- 해당 위치에서 가장 가까운 곳에서 Cloud Service 이용 가능
- 서버 정지 시 대처 가능
- 2016년 1월 28일, 서울 리전 오픈

**Availability Zone**: 데이터 센터(IDC; Internet Data Center)  
- AWS 하나의 리전에 다수의 가용영역(AZ) 보유
- 다양한 이유로 작동 불능이 되더라도 다른 AZ에서 서비스 재개 가능
- 서울 리전에는 3개의 AZ 구축 및 운영 중

**Edge Location**: Amazon의 CDN 서비스인 CloudFront를 위한 캐시 서버들의 모음
- **CDN**(; Content Delivery Network): 콘텐츠(HTML, image, video etc)를 서버와 물리적으로 사용자들이 빠르게 받을 수 있도록 전세계 곳곳에 위치한 캐시 서버에 복제해주는 서비스  
- 콘텐츠를 빠르게 받기 위해 물리적으로 보다 가까운 서버에 접속하여 다운로드 받을 수 있게 해줌

## 4. Amazon EC2
**→ Elastic Compute Cloud의 약자로, AWS 상에서 안정적이며 크기를 조정 가능한 컴퓨터 파워를 제공하는 웹 서비스**   

- 인스턴스: 가상화 서버
    - 필요에 따라 여러 개의 인스턴스 구성 가능
    - 몇 분 만에 새로운 서버 생성 및 서비스를 위한 인프라 구축 가능  

#### AWS EC2의 주요 기능
- 인스턴스 유형
    - 범용(M 시리즈)
    - 컴퓨팅 최적화(C 시리즈)
    - 스토리지 최적화(I, D 시리즈)
    - GPU 최적화(G 시리즈)
    - 메모리 최적화(R 시리즈)
- 인스턴스 구매 옵션
    - On-Demand
        - 필요할 때 바로 생성해서 사용 (초 단위 비용 지불)
        - 빈번히 서버 생성 및 삭제하는 개발 환경에 적합
    - Reserved
        - 1년 또는 3년의 기간에 대한 약정을 통해 사용 (온디맨드보다 최대 75% 저렴)
        - 장기적으로 변경 없이 1~3년간 사용하는 경우 적합
    - Spot
        - 경매 방식의 인스턴스 (스펙을 정해 비용을 입찰)
        - 단기적으로 병렬 컴퓨팅 파이워를 사용하는 서비스에 적합
    - Dedicated
        - 고객 전용 HW에서 인스턴스 서비스 제공
        - 고객의 전용 HW 사용을 통해 보다 보안성 높고 안정적인 클라우드 서비스 사용 목적에 적합

### **Amazon EBS**
**Elastic Block Storage의 약자로, EC2로 연결되는 Block Level의 스토리지 서비스**  

**서비스 유형**   
- 범용 SSD
    - 다양한 트랜잭션 워크로드 처리
    - 범용성 높고, 가성비 좋다는 이유로 보툥 범용 SSD 선택
    - ex) 부트 볼륨
- 프로비저닝된 IOPS
    - 지연 시간에 민감한 고성능 처리
    - ex) I/O 집약적인 NoSQL, RDBMS
- 처리량 최적화 HDD
    - 자주 액세스 하며 처리량 집약적 HDD
    - ex) 빅데이터, 로그 처리
- 콜드 HDD
    - 액세스 빈도 낮은 저비용 HDD
    - ex) 일별 스캔 횟수 작업 데이터
- 마그네틱
    - 빈도가 낮으며 성능 낮은 HDD
    - 저렴한 비용을 위해 선택
    - ex) 드문 데이터 액세스

### **스냅샷 활용**
**→ EBS 볼륨의 데이터를 스냅샷으로 만들어 Amazon S3에 백업 및 보관할 수 있는 기능**  
- 스냅샷 진행 과정 중에서도 EBS나 EC2 서비스 중단 X
- EBS 볼륨의 크기 조정 가능
- 스냅샷 공유 기능을 활용해 권한이 있는 다른 유저에게 공유 가능
- 다른 리전으로 복사 가능

### **성능과 보안성 높이기**
- 프로비저닝된 IOPS → 보다 높은 I/O 성능 제공
- EBS 최적화된 인스턴스
- EBS 암호화 기능 → AES-256(EBS의 암호화 알고리즘)으로 암호화

## 5. Amazone 보안 그룹
**→ 인스턴스에 대한 인바운드, 아웃바운드의 네트워크 트래픽을 제어하는 가상의 방화벽 역할 수행**  

- 온프라미스(On-Premise)에서 사용되고 있는 방화벽의 정책과 유사한 기능
- 네트워크에 트래픽에 대한 허용만 가능하고 **차단은 설정 불가능**
- 차단 기능을 위해서는 VPU의 기능인 네트워크 ACL을 통해 서브넷 수준에서 흐름 제어

**특징**
- 생성 가능한 보안 그룹의 숫자와 규칙에 제한이 있음
- 네트워크 트래픽을 위한 Allow 정책은 있으나 Deny 정책은 없음
- 인바운드 트래픽과 아웃바운드 트래픽 별도 제어 가능
- 초기 보안 그룹 설정에는 인바운드 보안 규칙 없음
