# Session과 Token, 그리고 Cookie에 대하여

&nbsp; Auth(인증)을 통해 서비스는 유저를 검증할 수 있다. 따라서 개발자가 되기 위해 알아야 하는 필수 기능 중 하나인데, 이 과정에서 cookie, session, token, jwt와 같은 용어를 들어봤을 것이다. 이 용어들에 대해 대충은 알고 있지만, 개념이 정확히 잡혀있지 않으면 언제 무엇을 써야할지 헷갈리게 된다. 오늘은 이 부분에 대해 알아보자.  

## 🍪 Cookie
**쿠키는** 공개 가능한 정보를 사용자의 Browser에 저장한다.  
- client의 request에 대한 browser에 쿠키가 저장된 후 해당 웹 사이트에 방문할 때마다 browser는 해당 쿠키도 request와 함께 보내게 된다.
- 도메인에 따라 제한된다.
- 유효기간이 있다.  
- ex) page 언어 설정   
</br>  

## 🔐 Session
**세션은** 인증 정보를 쿠키에 저장하지 않는 대신, 사용자의 식별자인 **session id**를 저장한다. 세션은 Server에 저장되기 때문에 사용자가 늘어남에 따라 해당 유저의 정보를 찾고 데이터 매칭에 오랜 시간이 걸리면서 Server에 부하가 가해지게 된다.  


## 💰 Token
**토큰은** 서버의 상태를 저장하지 않는다. (stateless) 따라서 토큰 자체로 정보를 가지고 있기 때문에 별도의 인증 서버가 필요하지 않다. 가장 많이 사용되는 토큰인 JWT는 JSON 포맷으로 통신하여 범용성이 있다.  

## ✓ JWT (; JSON Web Token)
- 당사자 간에 정보를 JSON 개체로 안전하게 전송하기 위한 컴팩트하고 독립적인 방식을 정의하는 개방형 표준(RFC 7519)
- 디지털 서명이 돼있어 확인하고 신뢰 가능
- 정보를 안전하게 전하거나 유저의 권한 등을 체크하기 위해 사용하는 데 유용한 모듈  

### JWT의 구조
- **Header** : 토큰에 대한 메타 데이터를 포함하고 있음 (타입, 해싱 알고리즘 등)
- **Payload** : 유저 정보, 만료 기간, 주제 등등
- **Verify Signature** : 토큰이 보낸 사람에 의해 서명됐으며, 어떤 식으로든 변경되지 않았는지 확인하는 데 사용되는 서명  

### JWT의 흐름
- i) 유저 로그인
- ii) 토큰 생성
    - 데이터(이름, 직책, 생성일자, 파기일자 등) + Secret Text
    - Hashing 알고리즘 이용
- iii) 토큰 보관  
- iv) Admin만 볼 수 있는 글을 보고자 할 때
    - 요청을 보낼 때 보관하고 있던 Token을 Header에 얺어서 같이 보냄
    - 서버에서 JWT를 이용해 Token을 다시 생성 후 두개를 비교
    - 통과되면 원하는 글을 볼 수 있음


